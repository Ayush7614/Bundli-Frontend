(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1061:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(8),r=a.n(n),i=a(11),o=a(5);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=a(3).a.configuration.PNL_CONFIG,l=(c=void 0===c?{}:c).LOGIN_BLOCKER,d=(l=void 0===l?{}:l).EXLUDE_ROUTES,f=void 0===d?{}:d,E=l.INCLUDED_COUNTRY,g=void 0===E?{}:E,p=l.EMAIL_BLOCKER_ENABLED,v=void 0===p||p,O=u({PAYMENTS:{route:"/subscribe/payment"},GET_STARTED:{route:"/subscribe/get-started"},PROMO:{route:"/subscribe/promo"}},f),y=u({IN:{code:"IN"}},g),S=function(){var e,t,a=i.canUseDOM?window.location.href:"";return v&&(t=decodeURIComponent(a),!Object.values(O).some((function(e){return t.indexOf(e.route)>-1})))&&(e=o.a.getWebsiteCountry(),Object.values(y).some((function(t){return t.code.toLowerCase()===e.toLowerCase()})))}},1099:function(e,t,a){"use strict";var n=a(19),r=a.n(n),i=a(8),o=a.n(i),s=a(10),u=a.n(s),c=a(13),l=a.n(c),d=a(83),f=a.n(d),E=a(25),g=a.n(E),p=a(26),v=a.n(p),O=a(17),y=a.n(O),S=a(37),h=a.n(S),b=a(108),m=a(50),I=a(1144),P=a(970),T=a(2),_=a.n(T),N=a(0),R=a.n(N),L=a(20),w=a.n(L),k=a(55),C=a.n(k),M=a(7),D=a(895),A=a(3),F=a(1160),U=a(1061),B=a(45),G=a(23);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=A.a.configuration.PNL_CONFIG,V=void 0===j?{}:j,K=V.PNL_FLOW_V2,W=(K=void 0===K?{}:K).FB_FLOW_V2_MIGRATION_ENABLED,Y=void 0!==W&&W,J=V.COUNTRY_CODE,q=void 0===J?91:J,z=V.TRUNK_NUMBER,Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return z&&e.charAt(0)===z?e.slice(1):e},X={getOTPCode:function(){return{remote:(e=_()(R.a.mark((function e(t,a){var n,r,i,o,s,u,c,l,d,f,E,g;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.OTPUserType,r=a.mode,i=t[n],o=t.fbMigrationStatus,s=M.a.getDeviceID(),e.next=5,M.a.getUserToken();case 5:if(u=e.sent,c=M.a.getUUID(),l="phone_".concat(r),d={userIdentity:u,deviceId:s,uuid:c},f=n===D.b.EMAIL?{email:i,device_meta:{device_name:G.a.getDeviceName()}}:{phone_number:Q(i),country_prefix:"".concat(q),device_meta:{device_name:G.a.getDeviceName()}},E={payload:f,infoPayload:{},device_meta:{device_name:G.a.getDeviceName()}},g={registerBy:l,updateInfo:!1,isGdprCountry:B.a.isGdprCountry()},!Y||o!==D.a.PHONE_NOT_LINKED){e.next=16;break}return d.userIdentity=a.userIdentity,g={verifyBy:"phone_otp",source:"phone_migration"},e.abrupt("return",w.a.restCall("verifyUser",d,f,g));case 16:return e.abrupt("return",w.a.restCall("signup",d,E,g));case 17:case"end":return e.stop()}}),e)}))),function(t,a){return e.apply(this,arguments)}),local:function(){return null},success:P.a.getOTPCallback,error:P.a.getOTPCallback};var e},submitOTPCode:function(){return{remote:(e=_()(R.a.mark((function e(t,a){var n,r,i,o,s,u,c,l,d,f,E,g,p,v;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.OTPUserType,r=a.mode,i=a.fbId,o=t[n],s=t.otp,u=t.fbMigrationStatus,c=M.a.getDeviceID(),l={device_meta:{device_name:G.a.getDeviceName()}},e.next=6,M.a.getUserToken();case 6:if(e.t0=e.sent,e.t1=c,e.t2=M.a.generateUUID(),d={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},f=n===D.b.EMAIL?H({email:o,verification_code:s},l):H({phone_number:Q(o),verification_code:s},l),Y&&u===D.a.PHONE_LINKED&&i&&(f=H({facebook_id:i,verification_code:s},l)),E="phone_".concat(r),g={loginBy:E},!Y||u!==D.a.PHONE_NOT_LINKED){e.next=19;break}return d.userIdentity=a.userIdentity,g={source:"phone_migration"},p={phone_login_info:{phone_number:o,verification_code:s}},e.abrupt("return",w.a.restCall("updateUserInfo",d,p,g));case 19:return e.next=21,w.a.restCall("login",d,f,g);case 21:return v=e.sent,e.abrupt("return",Promise.resolve(v));case 23:case"end":return e.stop()}}),e)}))),function(t,a){return e.apply(this,arguments)}),local:function(){return null},success:P.a.submitOTPCallback,error:P.a.submitOTPCallback};var e},updateInfo:function(){return{remote:function(e,t){var a={deviceId:M.a.getDeviceID(),uuid:M.a.generateUUID(),userIdentity:t.userIdentity},n={age:t.age,gender:t.gender,first_name:t.fname,last_name:t.lname};return w.a.restCall("updateUserInfo",a,n,{tamperedTokenRedirect:!0})},local:function(){return null},success:P.a.updateProfileCallback,error:P.a.updateProfileCallback}},checkEmailExist:function(){return{remote:(e=_()(R.a.mark((function e(t){var a,n,r,i,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=D.b.EMAIL,r=M.a.getDeviceID(),i={id:a,type:n.toUpperCase()},e.next=6,M.a.getUserToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=M.a.generateUUID(),o={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},e.abrupt("return",w.a.restCall("getLoginMethods",o,i));case 11:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),local:function(){return null},success:P.a.emailExistCallback,error:P.a.emailExistCallback};var e},loginFB:function(){return{remote:(e=_()(R.a.mark((function e(t,a){var n,r,i,o,s,u;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M.a.getDeviceID(),r=a.fbId,i=a.token,e.next=4,M.a.getUserToken();case 4:return e.t0=e.sent,e.t1=n,e.t2=M.a.generateUUID(),o={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},s=H(H({facebook_id:r,token:i},Y?{phone_migration_enabled:!0}:{}),{},{device_meta:{device_name:G.a.getDeviceName()}}),u={loginBy:"facebook"},e.abrupt("return",w.a.restCall("login",o,s,u));case 12:case"end":return e.stop()}}),e)}))),function(t,a){return e.apply(this,arguments)}),local:function(){return null},success:P.a.FBLoginCallback,error:P.a.FBLoginCallback};var e},loginEmail:function(){return{remote:(e=_()(R.a.mark((function e(t){var a,n,r,i,o,s,u,c,l,d;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,r=M.a.getDeviceID(),e.next=4,M.a.getUserToken();case 4:return e.t0=e.sent,e.t1=r,e.t2=M.a.generateUUID(),i={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},o={email:a,password:n,device_meta:{device_name:G.a.getDeviceName()}},s=D.b.EMAIL,u={loginBy:s},e.next=13,w.a.restCall("login",i,o,u);case 13:if(c=e.sent,l=C()(c,"description.userIdentity",""),!Object(U.a)(l)){e.next=21;break}return e.next=18,Object(F.a)(l);case 18:e.t3=e.sent,e.next=22;break;case 21:e.t3=!1;case 22:return d=e.t3,e.abrupt("return",Promise.resolve(H(H({},c),{},{blockEmailLogin:d})));case 24:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),local:function(){return null},success:P.a.emailLoginCallback,error:P.a.emailLoginCallback};var e},signupByEmail:function(){return{remote:(e=_()(R.a.mark((function e(t){var a,n,i,o,s,u,c,l,d,f,E,g,p,v,O,y,S,h,b,m,I,P,T;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.getUserToken();case 2:return a=e.sent,n=M.a.getDeviceID(),i=M.a.getUUID(),o={userIdentity:a,deviceId:n,uuid:i},s=t.email,u=t.password,c=t.usertype,l=t.name,d=t.age,f=void 0===d?"":d,E=t.gender,g=void 0===E?"":E,p={email:s,password:u},v=l.split(" "),O=r()(v,2),y=O[0],S=void 0===y?"hotstar":y,h=O[1],m={first_name:S,age:f,gender:g},(b=void 0===h?"":h)&&(m.last_name=b),I={payload:p,infoPayload:m,device_meta:{device_name:G.a.getDeviceName()}},P={registerBy:c,updateInfo:!0,isGdprCountry:B.a.isGdprCountry()},e.next=15,w.a.restCall("signup",o,I,P);case 15:return T=e.sent,e.abrupt("return",T);case 17:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),local:function(){return null},success:P.a.signupByEmailSuccess,error:P.a.signupByEmailFailure};var e},sendResetPasswordEmail:function(){return{remote:(e=_()(R.a.mark((function e(t){var a,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n={email:a},e.next=4,M.a.getUserToken();case 4:return e.t0=e.sent,e.t1=M.a.getDeviceID(),e.t2=M.a.generateUUID(),r={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},e.abrupt("return",w.a.restCall("forgotPassword",r,n));case 9:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),local:function(){return null},success:P.a.sendResetPasswordEmailSuccess,error:P.a.sendResetPasswordEmailFail};var e}},Z=a(14),$=a(22),ee=a(1199),te=a.n(ee),ae=a(27),ne=a(275),re=a(1),ie=a(288),oe=a(5),se={getProfileFormFlowTypeForPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=A.a.configuration,a=(t=void 0===t?{}:t).ROUTE_NAME_MAPPING,n=void 0===a?{}:a,i=e.split("/");if(i.length>2){var o="/".concat(i.slice(2).join("/")),s=Object.entries(n).find((function(e){var t=r()(e,2)[1];return"string"==typeof t&&t===o}));if(s)return s[0]}},getProfileFormFlowType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e||window.location.pathname;return this.getProfileFormFlowTypeForPath(t)||this.getProfileFormFlowTypeForPath(oe.a.getQueryStringByName("returnURL")||"")}};function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=y()(e);if(t){var r=y()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var de=A.a.configuration,fe=de.PNL_CONFIG,Ee=void 0===fe?{}:fe,ge=de.PROFILE_FORM_CONFIG,pe=Ee.PNL_FLOW_V2,ve=(pe=void 0===pe?{}:pe).SHOW_LOGIN_HOME,Oe=void 0!==ve&&ve,ye=pe.EMAIL_FLOW_V2_ENABLED,Se=void 0!==ye&&ye,he=pe.FB_FLOW_V2_MIGRATION_ENABLED,be=void 0!==he&&he,me=re.f.USER_TYPES,Ie=me.OLD_USER,Pe=me.NEW_USER;function Te(e){return function(t){var a={};for(var n in t)e(t[n],n)&&(a[n]=t[n]);return a}}var _e=Te((function(e){return!!e})),Ne=Te((function(e,t){return D.g.includes(t)&&!!e})),Re=function(){if("object"!==h()(ge))return!0;var e=ge.ENABLE_FOR_POPUP,t=ge.ENABLE_FOR_ROUTES,a=se.getProfileFormFlowType();return a?t.includes(a):!!e},Le=function(e){g()(a,e);var t=le(a);function a(){var e;u()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getOTPCallback=function(t){var a=t.errorMessageV3,n=t.description,r=(n=void 0===n?{}:n).phone,i=t.httpStatus,o=t.errorCode,s=null;if(200===i||201===i)s="Success",e.setState({dialogState:re.c.NONE,maskedPhone:r,viewType:D.e.OTP_ENTER});else{s="Submit Failed";var u=e.buildErrorMessage(a,o);e.setState({dialogState:re.c.ERROR,errorMessage:u})}e.state.resendOTPTries>0?ae.a.fireResendOTPEvent({noOfTries:e.state.resendOTPTries,otpType:"otp"===e.data.mode?"SMS":"Call"}):ae.a.fireSubmittedPhoneNumberEvent({pageTitle:"Enter Phone Number",response:s})},e.submitOTPCallback=function(t){var a=t.httpStatus,n=t.description,r=(n=void 0===n?{}:n).userIdentity,i=n.deviceLoggedOutInfo,o=void 0===i?{}:i,s=t.errorCode,u=t.errorMessageV3,c=null;if(201===a||200===a){var l=o.is_device_logged_out,d=o.entitlement_info,f=void 0===d?{}:d,E=f.is_upgradeable,g=f.context,p=void 0===g?{}:g,v=f.failed_capabilities,O=void 0===v?[]:v;e.userType=200===a?Ie:Pe;var y=Z.a.getSubsDataFromJwt(r),S=y.sub,h=(S=void 0===S?{}:S).extAuthId,b=!y.name&&!h,m=e.data.fbId&&!h,I=b&&Re()?D.e.PROFILE_ENTER:D.e.SUCCESSFUL_DISPLAY,P=201===a,T=Object(ie.a)(),_={context:p,failed_capabilities:O};e.data.userIdentity=r,T&&e.setentitlementInfo(_),e.setState((function(){return ce(ce({},Ne(y)),{},{dialogState:re.c.NONE,isSignup:P,viewType:I,deviceLoggedOutInfo:T?{isDeviceLoggedOut:l,isUpgradable:E}:{},pspContext:_})}),e.finishLogin),b||m&&(be||e.updateProfileWithFB()),c="Success"}else{var N=e.buildErrorMessage(u,s);e.setState({dialogState:re.c.ERROR,errorMessage:N}),c=401===a?"Invalid":"Submit Failed"}ae.a.fireSubmittedOTPEvent({otpType:"otp"===e.data.mode?"SMS":"Call",pageTitle:"Enter OTP",response:c})},e.finishLogin=function(){var t=e.state,a=t.email,n=t.age,r=t.gender,i=t.dateOfBirth,o=t.deviceLoggedOutInfo,s=e.data,u=s.fbId,c=s.fbToken,l={description:{userIdentity:s.userIdentity},facebookObj:{deviceId:M.a.getDeviceID(),fbId:u,emailId:a,isProfileRequired:!1,token:c,dateOfBirth:i,age:n,gender:M.a.getGender(r)},isPNL:!(window&&window.location&&window.location.href&&/returnURL/g.test(window.location.href)),userType:e.userType,autoDismissModal:!(null!=o&&o.isDeviceLoggedOut)};e.userType===Pe?setTimeout((function(){return $.a.signupSuccess(l)}),0):setTimeout((function(){return $.a.loginSuccess(l)}),0)},e.emailProfileUpdate=function(t){var a=D.e.PROFILE_ENTER;e.setState((function(){return{dialogState:re.c.NONE,isSignup:!0,viewType:a,usertype:t}}),e.finishLogin)},e.updateProfileCallback=function(t){var a=t.httpStatus,n=t.description,r=(n=void 0===n?{}:n).userIdentity,i=t.errorCode,o=t.errorMessageV3,s=null;if(200===a||201===a){s="Success";var u=Z.a.getSubsDataFromJwt(r);e.data.userIdentity=r,e.setState(ce(ce({},Ne(u)),{},{dialogState:re.c.NONE,viewType:D.e.SUCCESSFUL_DISPLAY}))}else{s="Submit Failed";var c=e.buildErrorMessage(o,i);e.setState({dialogState:re.c.ERROR,errorMessage:c})}ae.a.fireSubmittedAboutYouEvent({enteredValueName:e.data.fname,enteredValueAge:e.data.age,enteredValueGender:e.data.gender,pageTitle:"About You",response:s,userType:e.userType})},e.emailExistCallback=function(t){var a=t.description,n=(a=void 0===a?{}:a).exists,r=a.usertype,i=t.errorCode,o=t.errorMessageV3,s="Success";if(!1===n)Se?e.setState({dialogState:re.c.NONE,isSignup:!0,viewType:D.e.EMAIL_LOGIN}):e.setState({dialogState:re.c.NONE,isSignup:!0,viewType:D.e.PHONE_ENTER});else if(r===D.b.PHONE)e.data.OTPUserType=D.b.EMAIL,e.getOTPCodeViaMsg();else if(r===D.b.EMAIL||r===D.b.MERGED)e.setState({dialogState:re.c.NONE,usertype:r,viewType:D.e.EMAIL_LOGIN});else if(r===D.b.FB)e.setState({dialogState:re.c.NONE,usertype:r,viewType:D.e.FB_LOGIN});else{s="Submit Failed";var u=e.buildErrorMessage(o,i);e.setState({dialogState:re.c.ERROR,errorMessage:u})}ae.a.fireSubmittedEmailEvent({enteredEmail:e.state.email,pageTitle:"Alternate Login Methods",response:s})},e.FBLoginCallback=function(t){var a,n,r=t.httpStatus,i=t.description,o=(i=void 0===i?{}:i).userIdentity,s=t.errorCode,u=t.errorMessageV3,c=t.status,l=t.phone,d=null,f=D.e.PHONE_ENTER;if(be){var E=!1;200===r?(d="Success",e.userType=Ie,e.data.userIdentity=o,c===D.a.PHONE_LINKED?(n=c,f=D.e.OTP_ENTER):c===D.a.PHONE_NOT_LINKED&&(n=c,E=!0,f=D.e.PHONE_ENTER)):406===r?(n=D.a.FACEBOOK_USER_CREATION_NOT_ALLOWED,d="Success",E=!0,f=D.e.PHONE_ENTER,e.userType=Pe,e.resetFbToken()):(d="Submit Failed",a=e.buildErrorMessage(u,s),Oe&&(f=D.e.LOGIN_HOME));var g="Success"===d;e.setState(ce(ce(ce({isSignup:E,dialogState:g?re.c.NONE:re.c.ERROR,viewType:f,phone:""},l?{maskedPhone:l}:{}),{},{fbMigrationStatus:n},g?{errorMessage:a}:{}),a?{errorMessage:a}:{}))}else if(200===r||201===r){d="Success",e.userType=Ie;var p=Z.a.getSubsDataFromJwt(o);e.data.userIdentity=o,e.setState(ce(ce({},Ne(p)),{},{dialogState:re.c.NONE,usertype:D.b.FB,viewType:D.e.SUCCESSFUL_DISPLAY,phone:""}),e.finishLogin)}else 406===r?(d="Success",e.userType=Pe,e.data.userIdentity=o,e.setState({isSignup:!0,dialogState:re.c.NONE,viewType:D.e.PHONE_ENTER,phone:""})):(d="Submit Failed",a=e.buildErrorMessage(u,s),e.setState({dialogState:re.c.ERROR,errorMessage:a}));ae.a.fireSubmittedFacebookEvent({enteredEmail:e.state.email,pageTitle:"Alternate Login Methods",response:d})},e.shouldOverrideLoginViewState=function(e){var t={};return e&&(t.viewType=D.e.LOGIN_BLOCKER),t},e.emailLoginCallback=function(t){var a=t.httpStatus,n=t.description,r=(n=void 0===n?{}:n).userIdentity,i=t.errorCode,o=t.errorMessageV3,s=t.blockEmailLogin,u=null;if(201===a||200===a){u="Success",e.userType=200===a?Ie:Pe;var c=Z.a.getSubsDataFromJwt(r),l=e.shouldOverrideLoginViewState(s);e.data.userIdentity=r,e.setState(ce(ce({},Ne(c)),{},{dialogState:re.c.NONE,viewType:D.e.SUCCESSFUL_DISPLAY,phone:"",userIdentity:r},l),e.finishLogin)}else{var d=e.buildErrorMessage(o,i);e.setState({dialogState:re.c.ERROR,errorMessage:d}),u=te.a[i]&&te.a[i].analyticsTitle||"Submit Failed"}ae.a.fireSubmittedPasswordEvent({enteredEmail:e.state.email,pageTitle:"Enter Password",response:u})},e.sendResetPasswordEmailSuccess=function(t){t.success?(e.setState({dialogState:re.c.NONE,viewType:D.e.RESET_PASSWORD_SENT}),ae.a.fireResetPasswordEvent({enteredEmail:e.state.email,pageTitle:"Forgot Password",response:"Success",source:"Forgot Password"})):e.sendResetPasswordEmailFail(t)},e.sendResetPasswordEmailFail=function(t){var a=t.errorMessageV3,n=t.errorCode,r=e.buildErrorMessage(a,n);e.setState({dialogState:re.c.ERROR,errorMessage:r}),ae.a.fireResetPasswordEvent({enteredEmail:e.state.email,pageTitle:"Forgot Password",response:"ERR_UM_020"===n?"Invalid Email":"Submit Failed",source:"Forgot Password"})},b.canUseDOM&&(window.strUtils=Z.a,window.PNLStore=f()(e)),e.state=D.d,Oe&&(e.state.viewType=D.e.LOGIN_HOME),e.data=D.c,e.bindActions(P.a),e.exportAsync(X),e}return l()(a,[{key:"setPhone",value:function(e){this.setState({phone:e})}},{key:"setEmail",value:function(e){this.setState({email:e})}},{key:"setPassword",value:function(e){this.setState({password:e})}},{key:"setOTP",value:function(e){this.setState({otp:e})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"setAge",value:function(e){this.setState({age:e})}},{key:"setGender",value:function(e){this.setState({gender:e})}},{key:"setViewType",value:function(e){this.setState({viewType:e})}},{key:"goBack",value:function(){var e=this.state,t=e.viewType,a=e.isSignup,n=e.email,r=e.usertype,i=e.fbMigrationStatus,o=void 0===i?"":i,s=this.data.fbId,u=t,c=r,l=a,d=!1;switch(t){case D.e.PHONE_ENTER:l=!1,Oe?(u=D.e.LOGIN_HOME,d=!0,this.resetFbToken()):u=a&&s?D.e.FB_LOGIN:D.e.EMAIL_CHECK;break;case D.e.EMAIL_CHECK:Oe?(u=D.e.LOGIN_HOME,this.resetFbToken()):u=D.e.PHONE_ENTER;break;case D.e.OTP_ENTER:o===D.a.PHONE_LINKED?(d=!0,u=Oe?D.e.LOGIN_HOME:D.e.PHONE_ENTER,l=!1,this.resetFbToken()):u=this.data.OTPUserType===D.b.EMAIL?D.e.EMAIL_CHECK:D.e.PHONE_ENTER,this.data.OTPUserType=D.b.PHONE;break;case D.e.EMAIL_LOGIN:c=D.b.PHONE,u=D.e.EMAIL_CHECK;break;case D.e.PROFILE_ENTER:n||s||(l=!1),u=Se&&c===D.b.EMAIL?D.e.EMAIL_LOGIN:D.e.OTP_ENTER;break;case D.e.RESET_PASSWORD_ENTER:u=D.e.EMAIL_LOGIN;break;case D.e.FB_LOGIN:c=D.b.PHONE,u=D.e.EMAIL_CHECK;break;case D.e.RESET_PASSWORD_SENT:u=D.e.RESET_PASSWORD_ENTER}this.setState(ce({dialogState:re.c.NONE,isSignup:l,viewType:u,usertype:c},d?{fbMigrationStatus:""}:{}))}},{key:"resendOTPCodeViaMsg",value:function(){this.setState((function(e){return{resendOTPTries:e.resendOTPTries+1}}));var e=this.state.fbMigrationStatus;if(be){var t=this.data,a=t.fbId,n=t.fbToken;e===D.a.PHONE_LINKED?this.getInstance().loginFB({fbId:a,token:n}):this.getOTPCodeViaMsg()}else this.getOTPCodeViaMsg()}},{key:"getOTPCodeViaMsg",value:function(){return this.data.mode="otp",this.getOTPCode()}},{key:"resendOTPCodeViaCall",value:function(){this.getOTPCodeViaCall()}},{key:"getOTPCodeViaCall",value:function(){return this.data.mode="ivr",this.getOTPCode()}},{key:"getOTPCode",value:function(){return this.setState({dialogState:re.c.GET_OTP_LOADING}),this.getInstance().getOTPCode(this.data)}},{key:"setentitlementInfo",value:function(e){try{var t=function(){window.sessionStorage.setItem(re.f.ENTITLEMENT_INFO,JSON.stringify(ce(ce({},e),{},{isPure:!0,isUmsEntitlement:!0})))};if(b.canUseDOM){var a=window.sessionStorage.getItem(re.f.ENTITLEMENT_INFO);a&&(a=JSON.parse(a)).isWatchPageEntitlement||t()}}catch(e){console.error("issue in setting entitlement info",e)}}},{key:"submitOTPCode",value:function(){this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().submitOTPCode(this.data)}},{key:"updateProfileWithFB",value:function(){var e=this.data,t=e.userIdentity,a=e.fbId,n=e.fbToken,r={userIdentity:t,ext_fb:a&&n?{fbId:a,token:n}:void 0};return this.updateInfo(r)}},{key:"signupByEmail",value:function(){return this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().signupByEmail()}},{key:"signupByEmailSuccess",value:function(e){var t=e.description,a=(t=void 0===t?{}:t).userIdentity,n=Z.a.getSubsDataFromJwt(a);this.data.userIdentity=a,this.setState(ce(ce({},Ne(n)),{},{dialogState:re.c.NONE,viewType:D.e.SUCCESSFUL_DISPLAY}))}},{key:"signupByEmailFailure",value:function(e){var t=e.errorMessageV3,a=e.errorCode,n=this.buildErrorMessage(t,a);this.setState({dialogState:re.c.ERROR,errorMessage:n})}},{key:"updateProfile",value:function(){var e=this.state,t=e.name,a=e.age,n=e.gender,i=e.email,o=this.data,s=o.userIdentity,u=o.fbId,c=o.fbToken,l=t.split(" "),d=r()(l,2),f=u&&c?{fbId:u,token:c}:void 0,E={userIdentity:s,fname:d[0],lname:d[1],gender:n,age:a,email:!!Z.a.getSubsDataFromJwt(s).email||"phone"===this.state.usertype?"":i,ext_fb:f};return this.updateInfo(E)}},{key:"updateInfo",value:function(e){return this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().updateInfo(_e(e))}},{key:"checkEmailExist",value:function(){return this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().checkEmailExist()}},{key:"resetFbToken",value:function(){this.data.fbId="",this.data.fbToken=""}},{key:"loginFB",value:function(e){var t=r()(e,2)[1],a=t.profile,n=void 0===a?{}:a,i=t.tokenDetail,o=void 0===i?{}:i,s=n.id,u=n.email,c=n.first_name,l=n.last_name,d=n.birthday,f=n.gender,E=n.age,g=o.accessToken,p="".concat(c," ").concat(l),v={dialogState:re.c.FACEBOOK_LOADING};return be||(v=ce(ce({},v),{},{name:p,email:u,age:E,gender:f,dateOfBirth:d})),this.setState(v),this.data.fbId=s,this.data.fbToken=g,this.getInstance().loginFB({fbId:s,token:g})}},{key:"loginEmail",value:function(e){var t={dialogState:re.c.PRIMARY_LOADING};return e&&(t.usertype=e),this.setState(t),this.getInstance().loginEmail()}},{key:"sendResetPasswordEmail",value:function(){return this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().sendResetPasswordEmail()}},{key:"navigateEmailFB",value:function(e){var t=e.displayName,a=e.itemType;this.setState({dialogState:re.c.NONE,viewType:D.e.EMAIL_CHECK}),ae.a.fireSelectedAlternateLoginMethodsEvent(),ae.a.fireClickedItemEvent({display_name:t,item_type:a})}},{key:"navigateForgotPassword",value:function(){this.setState({dialogState:re.c.NONE,viewType:D.e.RESET_PASSWORD_ENTER})}},{key:"navigateFb",value:function(){this.setState({dialogState:re.c.NONE}),ae.a.fireInitiatedFacebook()}},{key:"navigateEmail",value:function(){this.setState({dialogState:re.c.NONE,viewType:D.e.EMAIL_CHECK}),ae.a.fireInitiatedEmail()}},{key:"navigatePhone",value:function(){this.setState({dialogState:re.c.NONE,viewType:D.e.PHONE_ENTER}),ae.a.fireInitiatedMobileNumber()}},{key:"fireEventOnMount",value:function(e){var t=e.name,a=void 0===t?"":t,n=e.title,r=void 0===n?"":n,i={name:a};r&&(i.title=r),ae.a.fireViewedPageEvent(i)}},{key:"tryAnotherPhone",value:function(){this.data.OTPUserType=D.b.PHONE,this.setState({dialogState:re.c.NONE,viewType:D.e.PHONE_ENTER})}},{key:"buildErrorMessage",value:function(e,t){var a=Object(ne.a)(t);return e||a.description}},{key:"setOTPUserTypeInData",value:function(e){this.data.OTPUserType=e}},{key:"hideSignInModal",value:function(){$.a.hideSignInModal.defer()}}]),a}(I.a);t.a=m.a.createStore(Le,"PNLStore")},1160:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(2),r=a.n(n),i=a(0),o=a.n(i),s=a(20),u=a.n(s),c=a(7),l=["ERR_UM_137","ERR_UM_134"],d=["ERR_UM_071","ERR_UM_099","UMSP_601"],f=a(84),E=function(){var e=r()(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,e.t0){e.next=5;break}return e.next=4,c.a.getUserToken();case 4:e.t0=e.sent;case 5:return e.t1=e.t0,e.t2=c.a.getDeviceID(),e.t3=c.a.generateUUID(),a={userIdentity:e.t1,deviceId:e.t2,uuid:e.t3},n=!1,e.prev=10,e.next=13,u.a.restCall("getPhoneLinkingStatus",a);case 13:e.next=19;break;case 15:e.prev=15,e.t4=e.catch(10),r=e.t4.errorCode,l.includes(r)?n=!0:d.indexOf(r)>-1&&f.a.logOut({});case 19:return e.abrupt("return",Promise.resolve(n));case 20:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()},1199:function(e,t){e.exports={ERR_UM_036:{analyticsTitle:"Incorrect Password"},ERR_UM_059:{analyticsTitle:"Max login attempt reached"}}},1524:function(e,t,a){"use strict";var n=a(4),r=a.n(n),i=(a(9),a(32),a(60)),o=a(1061),s=function(e){var t=e.userIdentity,n=e.onAnotherAccountClicked,s=e.height;return r()(i.a,{loader:function(){return Promise.all([a.e(0),a.e(43)]).then(a.bind(null,1639))},showBlocker:o.a,userIdentity:t,onAnotherAccountClicked:n,height:s})};s.defaultProps={userIdentity:"",onAnotherAccountClicked:function(){},height:""},t.a=s},2049:function(e,t,a){"use strict";a.r(t);var n,r=a(4),i=a.n(r),o=a(9),s=a.n(o),u=a(94),c=a.n(u),l=a(11),d=a(84),f=a(22),E=a(1099),g=a(10),p=a.n(g),v=a(13),O=a.n(v),y=a(25),S=a.n(y),h=a(26),b=a.n(h),m=a(17),I=a.n(m),P=(a(32),a(5)),T=a(1524),_=a(1061),N=a(895);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=I()(e);if(t){var r=I()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return b()(this,a)}}var L=Object(o.lazy)((function(){return Promise.all([a.e(0),a.e(4),a.e(96)]).then(a.bind(null,2054))})),w=function(e){S()(a,e);var t=R(a);function a(e){var n;return p()(this,a),(n=t.call(this,e)).onCloseModal=function(){n.props.globalAction.hideSignInModal.defer(!0)},n.isModalVisible=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.globalStore,a=t.signInModalData,n=void 0===a?{}:a;return n.show||!1},n.showPhoneLinkBlocker=function(){var e=n.props.pnlStore;return(e=void 0===e?{}:e).viewType===N.e.LOGIN_BLOCKER&&Object(_.a)()&&!P.a.isSubsWeb()},n.showModal=!1,n.countryCode=P.a.getWebsiteCountry(),n}return O()(a,[{key:"shouldComponentUpdate",value:function(e){var t=e.pnlStore.viewType,a=this.props.pnlStore.viewType;return this.showModal!==this.isModalVisible(e)||a!==t}},{key:"render",value:function(){var e=this.props,t=e.globalStore,a=e.pnlStore.userIdentity,r=t.signInModalData,u=void 0===r?{}:r,c=t.loginState,l=void 0!==c&&c;return this.showModal=this.isModalVisible(this.props),i()(s.a.Fragment,{},void 0,i()("div",{className:"signin-modal-wrapper",style:{display:this.showPhoneLinkBlocker()?"none":"block"}},void 0,this.showModal&&i()(o.Suspense,{fallback:n||(n=i()("div",{}))},void 0,i()(L,{onCloseModal:this.onCloseModal,modalState:this.showModal,loginState:l,countryCode:this.countryCode,signInModalData:u}))),this.showPhoneLinkBlocker()&&i()(T.a,{userIdentity:a}))}}]),a}(s.a.Component);t.default=function(e){return l.canUseDOM?i()("div",{className:"sign-in-container"},void 0,i()(c.a,{stores:{globalStore:d.a,pnlStore:E.a},actions:{globalAction:f.a}},void 0,s.a.createElement(w,e))):null}},895:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"g",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"f",(function(){return d})),a.d(t,"a",(function(){return s}));var n=a(1),r=a(288),i={PHONE_ENTER:"PHONE_ENTER",EMAIL_CHECK:"EMAIL_CHECK",OTP_ENTER:"OTP_ENTER",EMAIL_LOGIN:"EMAIL_LOGIN",FB_LOGIN:"FB_LOGIN",PROFILE_ENTER:"PROFILE_ENTER",SUCCESSFUL_DISPLAY:"SUCCESSFUL_DISPLAY",RESET_PASSWORD_ENTER:"RESET_PASSWORD_ENTER",RESET_PASSWORD_SENT:"RESET_PASSWORD_SENT",LOGIN_BLOCKER:"LOGIN_BLOCKER",LOGIN_HOME:"LOGIN_HOME"},o={PHONE:"phone",EMAIL:"email",FB:"facebook",MERGED:"merged"},s={PHONE_LINKED:"PHONE_LINKED",PHONE_NOT_LINKED:"PHONE_NOT_LINKED",FACEBOOK_USER_CREATION_NOT_ALLOWED:"FACEBOOK_USER_CREATION_NOT_ALLOWED"},u={viewType:i.PHONE_ENTER,usertype:o.PHONE,dialogState:n.f.PNL_DIALOG_STATE.NONE,isSignup:!1,errorMessage:"",email:"",password:"",phone:"",maskedPhone:"",otp:"",name:"",age:"",gender:"",dateOfBirth:"",resendOTPTries:0,fbMigrationStatus:"",showPlatformIcons:Object(r.b)(),deviceLoggedOutInfo:{}},c=["phone","name","email","gender","age","dateOfBirth"],l={OTPUserType:o.PHONE,userIdentity:"",fbId:"",fbToken:"",mode:"otp"},d="updatePassword"},970:function(e,t,a){"use strict";var n=a(10),r=a.n(n),i=a(25),o=a.n(i),s=a(26),u=a.n(s),c=a(17),l=a.n(c),d=a(50);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=l()(e);if(t){var r=l()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}var E=function(e){o()(a,e);var t=f(a);function a(){var e;return r()(this,a),(e=t.apply(this,arguments)).generateActions("setPhone","setEmail","setPassword","setOTP","setName","setAge","setGender","getOTPCodeViaMsg","getOTPCodeViaCall","submitOTPCode","updateProfile","checkEmailExist","loginFB","loginEmail","sendResetPasswordEmail","goBack","navigateEmailFB","navigateForgotPassword","tryAnotherPhone","finishLogin","resendOTPCodeViaMsg","resendOTPCodeViaCall","setViewType","getOTPCallback","submitOTPCallback","updateProfileCallback","emailExistCallback","FBLoginCallback","emailLoginCallback","sendResetPasswordEmailSuccess","sendResetPasswordEmailFail","setOTPUserTypeInData","navigateFb","navigateEmail","navigatePhone","emailProfileUpdate","signupByEmail","signupByEmailSuccess","signupByEmailFailure","fireEventOnMount","hideSignInModal"),e}return a}(a(1143).a);t.a=d.a.createActions(E)}}]);